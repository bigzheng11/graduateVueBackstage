{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      //定时器\n      num: 0,\n      timer: null,\n      //用户信息\n      user: {},\n      // echarts的数据配置项\n      option: {\n        // 中间大标题\n        title: {\n          text: \"用户15518745323\",\n          subtext: \"购买倾向图\",\n          left: \"center\"\n        },\n        tooltip: {\n          trigger: \"item\"\n        },\n        legend: {\n          orient: \"vertical\",\n          left: \"left\"\n        },\n        series: [{\n          name: \"Access From\",\n          type: \"pie\",\n          radius: \"50%\",\n          data: [],\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowOffsetX: 0,\n              shadowColor: \"rgba(0, 0, 0, 0.5)\"\n            }\n          }\n        }]\n      }\n    };\n  },\n\n  created() {\n    console.log(\"获取的userID\", this.$route.query.userID); //获取用户信息:\n\n    this.$axios.get(\"/api/user/detail/\" + this.$route.query.userID).then(response => {\n      console.log(response.data);\n      this.option.title.text = \"用户:\" + response.data.userName;\n    }).catch(error => {\n      console.log(error);\n    });\n    this.$axios.get(\"/api/interest/backstage/15518745323\").then(response => {\n      console.log(response.data);\n      let temp = {};\n\n      for (const item of response.data) {\n        temp.name = item.goodsClassify;\n        temp.value = item.grade;\n        this.option.series[0].data.push(temp);\n        temp = {};\n      }\n\n      var chartDom = document.getElementById(\"main\");\n      var myChart = this.$echarts.init(chartDom);\n      this.option && myChart.setOption(this.option);\n    }).catch(error => {\n      console.log(error);\n    }); // 实现轮询\n\n    this.timer = window.setInterval(() => {\n      setTimeout(this.getProjectList(), 0);\n    }, 1000);\n  },\n\n  mounted() {\n    var chartDom = document.getElementById(\"main\");\n    var myChart = this.$echarts.init(chartDom);\n    this.option && myChart.setOption(this.option);\n  },\n\n  methods: {\n    //查询\n    stop() {\n      clearInterval(this.timer);\n      this.timer = null;\n    },\n\n    // 请求是否有新消息\n    getProjectList() {\n      console.log(\"请求\" + this.num++ + \"次\");\n      this.$axios.get(\"/api/interest/backstage/15518745323\").then(response => {\n        console.log(response.data);\n        this.option.series[0].data = [];\n        let temp = {};\n\n        for (const item of response.data) {\n          temp.name = item.goodsClassify;\n          temp.value = item.grade;\n          this.option.series[0].data.push(temp);\n          temp = {};\n        }\n\n        var chartDom = document.getElementById(\"main\");\n        var myChart = this.$echarts.init(chartDom);\n        this.option && myChart.setOption(this.option);\n      }).catch(error => {});\n\n      if (this.num == 180) {\n        this.stop();\n      }\n    },\n\n    change() {\n      // 修改数据\n      this.option.series[0].data[0].value += 10; //  页面更新\n\n      var chartDom = document.getElementById(\"main\");\n      var myChart = this.$echarts.init(chartDom);\n      this.option && myChart.setOption(this.option);\n    }\n\n  },\n\n  destroyed() {\n    //离开页面是销毁\n    clearInterval(this.timer);\n    this.timer = null;\n  }\n\n};","map":{"version":3,"mappings":";AAmCA;EACAA;IACA;MAGA;MACAC,MAJA;MAKAC,WALA;MAMA;MACAC,QAPA;MASA;MACAC;QACA;QACAC;UACAC,qBADA;UAEAC,gBAFA;UAGAC;QAHA,CAFA;QAOAC;UACAC;QADA,CAPA;QAUAC;UACAC,kBADA;UAEAJ;QAFA,CAVA;QAcAK,SACA;UACAC,mBADA;UAEAC,WAFA;UAGAC,aAHA;UAIAhB,QAJA;UAKAiB;YACAC;cACAC,cADA;cAEAC,gBAFA;cAGAC;YAHA;UADA;QALA,CADA;MAdA;IAVA;EAyCA,CA3CA;;EA6CAC;IACAC,mDADA,CAGA;;IACA,YACAC,GADA,CACA,8CADA,EAEAC,IAFA,CAEAC;MACAH;MACA;IACA,CALA,EAMAI,KANA,CAMAC;MACAL;IACA,CARA;IAUA,YACAC,GADA,CACA,qCADA,EAEAC,IAFA,CAEAC;MACAH;MACA;;MACA;QACAM;QACAA;QACA;QACAA;MACA;;MACA;MACA;MACA;IACA,CAdA,EAeAF,KAfA,CAeAC;MACAL;IACA,CAjBA,EAdA,CAiCA;;IACA;MACAO;IACA,CAFA,EAEA,IAFA;EAGA,CAlFA;;EAoFAC;IACA;IACA;IACA;EACA,CAxFA;;EA0FAC;IACA;IACAC;MACAC;MACA;IACA,CALA;;IAOA;IACAC;MACAZ;MACA,YACAC,GADA,CACA,qCADA,EAEAC,IAFA,CAEAC;QACAH;QACA;QACA;;QACA;UACAM;UACAA;UACA;UACAA;QACA;;QACA;QACA;QACA;MACA,CAfA,EAgBAF,KAhBA,CAgBAC,WAhBA;;MAiBA;QACA;MACA;IACA,CA9BA;;IAgCAQ;MACA;MACA,0CAFA,CAGA;;MACA;MACA;MACA;IACA;;EAvCA,CA1FA;;EAoIAC;IACA;IACAH;IACA;EACA;;AAxIA","names":["data","num","timer","user","option","title","text","subtext","left","tooltip","trigger","legend","orient","series","name","type","radius","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","created","console","get","then","response","catch","error","temp","setTimeout","mounted","methods","stop","clearInterval","getProjectList","change","destroyed"],"sourceRoot":"src/views/user","sources":["UserInterest.vue"],"sourcesContent":["<template>\r\n   <div class=\"container\">\r\n      <div style=\"width: 700px; height: 700px\" id=\"main\">\r\n         <div class=\"card\">\r\n            <el-row>\r\n               <el-col\r\n                  :span=\"8\"\r\n                  v-for=\"(o, index) in 2\"\r\n                  :key=\"o\"\r\n                  :offset=\"index > 0 ? 2 : 0\"\r\n               >\r\n                  <el-card :body-style=\"{ padding: '0px' }\">\r\n                     <img\r\n                        src=\"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png\"\r\n                        class=\"image\"\r\n                     />\r\n                     <div style=\"padding: 14px\">\r\n                        <span>好吃的汉堡</span>\r\n                        <div class=\"bottom clearfix\">\r\n                           <time class=\"time\">{{ currentDate }}</time>\r\n                           <el-button type=\"text\" class=\"button\"\r\n                              >操作按钮</el-button\r\n                           >\r\n                        </div>\r\n                     </div>\r\n                  </el-card>\r\n               </el-col>\r\n            </el-row>\r\n         </div>\r\n      </div>\r\n      <button @click=\"change\">修改</button>\r\n   </div>\r\n</template>\r\n \r\n <script>\r\nexport default {\r\n   data() {\r\n      return {\r\n         \r\n\r\n         //定时器\r\n         num: 0,\r\n         timer: null,\r\n         //用户信息\r\n         user: {},\r\n\r\n         // echarts的数据配置项\r\n         option: {\r\n            // 中间大标题\r\n            title: {\r\n               text: \"用户15518745323\",\r\n               subtext: \"购买倾向图\",\r\n               left: \"center\",\r\n            },\r\n            tooltip: {\r\n               trigger: \"item\",\r\n            },\r\n            legend: {\r\n               orient: \"vertical\",\r\n               left: \"left\",\r\n            },\r\n            series: [\r\n               {\r\n                  name: \"Access From\",\r\n                  type: \"pie\",\r\n                  radius: \"50%\",\r\n                  data: [],\r\n                  emphasis: {\r\n                     itemStyle: {\r\n                        shadowBlur: 10,\r\n                        shadowOffsetX: 0,\r\n                        shadowColor: \"rgba(0, 0, 0, 0.5)\",\r\n                     },\r\n                  },\r\n               },\r\n            ],\r\n         },\r\n      };\r\n   },\r\n\r\n   created() {\r\n      console.log(\"获取的userID\", this.$route.query.userID);\r\n\r\n      //获取用户信息:\r\n      this.$axios\r\n         .get(\"/api/user/detail/\" + this.$route.query.userID)\r\n         .then((response) => {\r\n            console.log(response.data);\r\n            this.option.title.text = \"用户:\" + response.data.userName;\r\n         })\r\n         .catch((error) => {\r\n            console.log(error);\r\n         });\r\n\r\n      this.$axios\r\n         .get(\"/api/interest/backstage/15518745323\")\r\n         .then((response) => {\r\n            console.log(response.data);\r\n            let temp = {};\r\n            for (const item of response.data) {\r\n               temp.name = item.goodsClassify;\r\n               temp.value = item.grade;\r\n               this.option.series[0].data.push(temp);\r\n               temp = {};\r\n            }\r\n            var chartDom = document.getElementById(\"main\");\r\n            var myChart = this.$echarts.init(chartDom);\r\n            this.option && myChart.setOption(this.option);\r\n         })\r\n         .catch((error) => {\r\n            console.log(error);\r\n         });\r\n\r\n      // 实现轮询\r\n      this.timer = window.setInterval(() => {\r\n         setTimeout(this.getProjectList(), 0);\r\n      }, 1000);\r\n   },\r\n\r\n   mounted() {\r\n      var chartDom = document.getElementById(\"main\");\r\n      var myChart = this.$echarts.init(chartDom);\r\n      this.option && myChart.setOption(this.option);\r\n   },\r\n\r\n   methods: {\r\n      //查询\r\n      stop() {\r\n         clearInterval(this.timer);\r\n         this.timer = null;\r\n      },\r\n\r\n      // 请求是否有新消息\r\n      getProjectList() {\r\n         console.log(\"请求\" + this.num++ + \"次\");\r\n         this.$axios\r\n            .get(\"/api/interest/backstage/15518745323\")\r\n            .then((response) => {\r\n               console.log(response.data);\r\n               this.option.series[0].data = [];\r\n               let temp = {};\r\n               for (const item of response.data) {\r\n                  temp.name = item.goodsClassify;\r\n                  temp.value = item.grade;\r\n                  this.option.series[0].data.push(temp);\r\n                  temp = {};\r\n               }\r\n               var chartDom = document.getElementById(\"main\");\r\n               var myChart = this.$echarts.init(chartDom);\r\n               this.option && myChart.setOption(this.option);\r\n            })\r\n            .catch((error) => {});\r\n         if (this.num == 180) {\r\n            this.stop();\r\n         }\r\n      },\r\n\r\n      change() {\r\n         // 修改数据\r\n         this.option.series[0].data[0].value += 10;\r\n         //  页面更新\r\n         var chartDom = document.getElementById(\"main\");\r\n         var myChart = this.$echarts.init(chartDom);\r\n         this.option && myChart.setOption(this.option);\r\n      },\r\n   },\r\n\r\n   destroyed() {\r\n      //离开页面是销毁\r\n      clearInterval(this.timer);\r\n      this.timer = null;\r\n   },\r\n};\r\n</script>\r\n \r\n <style scoped>\r\n/* 卡片 */\r\n.time {\r\n   font-size: 13px;\r\n   color: #999;\r\n}\r\n\r\n.bottom {\r\n   margin-top: 13px;\r\n   line-height: 12px;\r\n}\r\n\r\n.button {\r\n   padding: 0;\r\n   float: right;\r\n}\r\n\r\n.image {\r\n   width: 100%;\r\n   display: block;\r\n}\r\n\r\n.clearfix:before,\r\n.clearfix:after {\r\n   display: table;\r\n   content: \"\";\r\n}\r\n\r\n.clearfix:after {\r\n   clear: both;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}