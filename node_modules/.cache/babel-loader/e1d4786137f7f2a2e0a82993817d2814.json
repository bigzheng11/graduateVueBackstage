{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      currentDate: new Date(),\n      goodsClassify: [{\n        id: 1,\n        name: \"芒果\"\n      }, {\n        id: 2,\n        name: \"鱼肉\"\n      }, {\n        id: 3,\n        name: \"波罗蜜\"\n      }, {\n        id: 4,\n        name: \"柚子\"\n      }, {\n        id: 5,\n        name: \"橙子\"\n      }, {\n        id: 6,\n        name: \"猕猴桃\"\n      }, {\n        id: 7,\n        name: \"苹果\"\n      }, {\n        id: 8,\n        name: \"草莓\"\n      }, {\n        id: 9,\n        name: \"卷心菜\"\n      }, {\n        id: 10,\n        name: \"西红柿\"\n      }, {\n        id: 11,\n        name: \"黄瓜\"\n      }, {\n        id: 12,\n        name: \"大白菜\"\n      }, {\n        id: 13,\n        name: \"西兰花\"\n      }, {\n        id: 14,\n        name: \"萝卜\"\n      }, {\n        id: 15,\n        name: \"生菜\"\n      }, {\n        id: 16,\n        name: \"金针菇\"\n      }, {\n        id: 17,\n        name: \"大葱\"\n      }, {\n        id: 18,\n        name: \"韭菜\"\n      }, {\n        id: 19,\n        name: \"南瓜\"\n      }, {\n        id: 20,\n        name: \"空心菜\"\n      }],\n      //定时器\n      num: 0,\n      timer: null,\n      //用户信息\n      user: {},\n      // echarts的数据配置项\n      option: {\n        // 中间大标题\n        title: {\n          text: \"用户15518745323\",\n          subtext: \"购买倾向图\",\n          left: \"center\"\n        },\n        tooltip: {\n          trigger: \"item\"\n        },\n        legend: {\n          orient: \"vertical\",\n          left: \"left\"\n        },\n        series: [{\n          name: \"Access From\",\n          type: \"pie\",\n          radius: \"50%\",\n          data: [],\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowOffsetX: 0,\n              shadowColor: \"rgba(0, 0, 0, 0.5)\"\n            }\n          }\n        }]\n      }\n    };\n  },\n\n  created() {\n    // console.log(\"获取的userID\", this.$route.query.userID);\n    //获取用户信息:\n    this.$axios.get(\"/api/user/detail/\" + this.$route.query.userID).then(response => {\n      // console.log(response.data);\n      this.user = response.data;\n      this.option.title.text = \"用户:\" + response.data.userName;\n    }).catch(error => {\n      console.log(error);\n    });\n    this.$axios.get(\"/api/interest/backstage/15518745323\").then(response => {\n      let temp = {};\n\n      for (const item of response.data) {\n        temp.name = item.goodsClassify;\n        temp.value = item.gradeY;\n        this.option.series[0].data.push(temp);\n        temp = {};\n      }\n\n      var chartDom = document.getElementById(\"main\");\n      var myChart = this.$echarts.init(chartDom);\n      this.option && myChart.setOption(this.option);\n    }).catch(error => {\n      console.log(error);\n    }); // 实现轮询\n\n    this.timer = window.setInterval(() => {\n      setTimeout(this.getProjectList(), 0);\n    }, 1000);\n  },\n\n  mounted() {\n    var chartDom = document.getElementById(\"main\");\n    var myChart = this.$echarts.init(chartDom);\n    this.option && myChart.setOption(this.option);\n  },\n\n  methods: {\n    //查询\n    stop() {\n      clearInterval(this.timer);\n      this.timer = null;\n    },\n\n    // 请求是否有新消息\n    getProjectList() {\n      console.log(\"请求\" + this.num++ + \"次\");\n      this.$axios.get(\"/api/interest/backstage/15518745323\").then(response => {\n        console.log(response.data);\n        this.option.series[0].data = [];\n        let temp = {};\n\n        for (const item of response.data) {\n          for (const goodsClassifyItem of this.goodsClassify) {\n            if (goodsClassifyItem.id == item.goodsClassify) {\n              temp.name = goodsClassifyItem.name;\n            }\n          } // temp.name = item.goodsClassify;\n\n\n          temp.value = item.gradeY;\n          console.log(\"temp\", temp);\n          this.option.series[0].data.push(temp);\n          temp = {};\n        }\n\n        console.log(\"option\", this.option);\n        var chartDom = document.getElementById(\"main\");\n        var myChart = this.$echarts.init(chartDom);\n        this.option && myChart.setOption(this.option);\n      }).catch(error => {\n        console.log(error);\n      }); //TODO: if (this.num == 180) {\n\n      if (this.num == 2) {\n        this.stop();\n      }\n    } // change() {\n    //    // 修改数据\n    //    this.option.series[0].data[0].value += 10;\n    //    //  页面更新\n    //    var chartDom = document.getElementById(\"main\");\n    //    var myChart = this.$echarts.init(chartDom);\n    //    this.option && myChart.setOption(this.option);\n    // },\n\n\n  },\n\n  destroyed() {\n    //离开页面是销毁\n    clearInterval(this.timer);\n    this.timer = null;\n  }\n\n};","map":{"version":3,"mappings":";AA+BA;EACAA;IACA;MACAC,uBADA;MAGAC,gBACA;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAD;QAAAC;MAAA,CAFA,EAGA;QAAAD;QAAAC;MAAA,CAHA,EAIA;QAAAD;QAAAC;MAAA,CAJA,EAKA;QAAAD;QAAAC;MAAA,CALA,EAMA;QAAAD;QAAAC;MAAA,CANA,EAOA;QAAAD;QAAAC;MAAA,CAPA,EAQA;QAAAD;QAAAC;MAAA,CARA,EASA;QAAAD;QAAAC;MAAA,CATA,EAUA;QAAAD;QAAAC;MAAA,CAVA,EAWA;QAAAD;QAAAC;MAAA,CAXA,EAYA;QAAAD;QAAAC;MAAA,CAZA,EAaA;QAAAD;QAAAC;MAAA,CAbA,EAcA;QAAAD;QAAAC;MAAA,CAdA,EAeA;QAAAD;QAAAC;MAAA,CAfA,EAgBA;QAAAD;QAAAC;MAAA,CAhBA,EAiBA;QAAAD;QAAAC;MAAA,CAjBA,EAkBA;QAAAD;QAAAC;MAAA,CAlBA,EAmBA;QAAAD;QAAAC;MAAA,CAnBA,EAoBA;QAAAD;QAAAC;MAAA,CApBA,CAHA;MAwBA;MACAC,MAzBA;MA0BAC,WA1BA;MA2BA;MACAC,QA5BA;MA8BA;MACAC;QACA;QACAC;UACAC,qBADA;UAEAC,gBAFA;UAGAC;QAHA,CAFA;QAOAC;UACAC;QADA,CAPA;QAUAC;UACAC,kBADA;UAEAJ;QAFA,CAVA;QAcAK,SACA;UACAb,mBADA;UAEAc,WAFA;UAGAC,aAHA;UAIAnB,QAJA;UAKAoB;YACAC;cACAC,cADA;cAEAC,gBAFA;cAGAC;YAHA;UADA;QALA,CADA;MAdA;IA/BA;EA8DA,CAhEA;;EAkEAC;IACA;IAEA;IACA,YACAC,GADA,CACA,8CADA,EAEAC,IAFA,CAEAC;MACA;MACA;MACA;IACA,CANA,EAOAC,KAPA,CAOAC;MACAC;IACA,CATA;IAWA,YACAL,GADA,CACA,qCADA,EAEAC,IAFA,CAEAC;MACA;;MACA;QACAI;QACAA;QACA;QACAA;MACA;;MACA;MACA;MACA;IACA,CAbA,EAcAH,KAdA,CAcAC;MACAC;IACA,CAhBA,EAfA,CAiCA;;IACA;MACAE;IACA,CAFA,EAEA,IAFA;EAGA,CAvGA;;EAyGAC;IACA;IACA;IACA;EACA,CA7GA;;EA+GAC;IACA;IACAC;MACAC;MACA;IACA,CALA;;IAOA;IACAC;MACAP;MACA,YACAL,GADA,CACA,qCADA,EAEAC,IAFA,CAEAC;QACAG;QACA;QACA;;QACA;UAEA;YACA;cACAC;YACA;UACA,CANA,CAQA;;;UACAA;UACAD;UACA;UACAC;QACA;;QACAD;QACA;QACA;QACA;MACA,CAxBA,EAyBAF,KAzBA,CAyBAC;QACAC;MACA,CA3BA,EAFA,CA+BA;;MAEA;QACA;MACA;IACA,CA5CA,CA8CA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;;EArDA,CA/GA;;EAuKAQ;IACA;IACAF;IACA;EACA;;AA3KA","names":["data","currentDate","goodsClassify","id","name","num","timer","user","option","title","text","subtext","left","tooltip","trigger","legend","orient","series","type","radius","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","created","get","then","response","catch","error","console","temp","setTimeout","mounted","methods","stop","clearInterval","getProjectList","destroyed"],"sourceRoot":"src/views/user","sources":["UserInterest.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\" style=\"position: relative\">\r\n    <div\r\n        style=\"width: 700px; height: 700px; display: inline-block\"\r\n        id=\"main\"\r\n    ></div>\r\n    <!--      <button @click=\"change\">修改</button>-->\r\n    <div\r\n        class=\"card\"\r\n        style=\"display: inline-block; position: absolute; left: 630px\"\r\n    >\r\n      <el-row>\r\n        <el-col :span=\"8\" :offset=\"index > 0 ? 2 : 0\" style=\"width: 200px\">\r\n          <el-card :body-style=\"{ padding: '0px' }\">\r\n            <img :src=\"user.userImg\" class=\"image\"/>\r\n            <div style=\"padding: 14px\">\r\n              <span>{{ user.userName }}</span>\r\n              <div class=\"bottom clearfix\">\r\n                <!-- <time class=\"time\">{{ currentDate }}</time> -->\r\n                ID:\r\n                <time class=\"time\">{{ user.userID }}</time>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      currentDate: new Date(),\r\n\r\n      goodsClassify: [\r\n        {id: 1, name: \"芒果\"},\r\n        {id: 2, name: \"鱼肉\"},\r\n        {id: 3, name: \"波罗蜜\"},\r\n        {id: 4, name: \"柚子\"},\r\n        {id: 5, name: \"橙子\"},\r\n        {id: 6, name: \"猕猴桃\"},\r\n        {id: 7, name: \"苹果\"},\r\n        {id: 8, name: \"草莓\"},\r\n        {id: 9, name: \"卷心菜\"},\r\n        {id: 10, name: \"西红柿\"},\r\n        {id: 11, name: \"黄瓜\"},\r\n        {id: 12, name: \"大白菜\"},\r\n        {id: 13, name: \"西兰花\"},\r\n        {id: 14, name: \"萝卜\"},\r\n        {id: 15, name: \"生菜\"},\r\n        {id: 16, name: \"金针菇\"},\r\n        {id: 17, name: \"大葱\"},\r\n        {id: 18, name: \"韭菜\"},\r\n        {id: 19, name: \"南瓜\"},\r\n        {id: 20, name: \"空心菜\"}],\r\n      //定时器\r\n      num: 0,\r\n      timer: null,\r\n      //用户信息\r\n      user: {},\r\n\r\n      // echarts的数据配置项\r\n      option: {\r\n        // 中间大标题\r\n        title: {\r\n          text: \"用户15518745323\",\r\n          subtext: \"购买倾向图\",\r\n          left: \"center\",\r\n        },\r\n        tooltip: {\r\n          trigger: \"item\",\r\n        },\r\n        legend: {\r\n          orient: \"vertical\",\r\n          left: \"left\",\r\n        },\r\n        series: [\r\n          {\r\n            name: \"Access From\",\r\n            type: \"pie\",\r\n            radius: \"50%\",\r\n            data: [],\r\n            emphasis: {\r\n              itemStyle: {\r\n                shadowBlur: 10,\r\n                shadowOffsetX: 0,\r\n                shadowColor: \"rgba(0, 0, 0, 0.5)\",\r\n              },\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n\r\n  created() {\r\n    // console.log(\"获取的userID\", this.$route.query.userID);\r\n\r\n    //获取用户信息:\r\n    this.$axios\r\n        .get(\"/api/user/detail/\" + this.$route.query.userID)\r\n        .then((response) => {\r\n          // console.log(response.data);\r\n          this.user = response.data;\r\n          this.option.title.text = \"用户:\" + response.data.userName;\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n\r\n    this.$axios\r\n        .get(\"/api/interest/backstage/15518745323\")\r\n        .then((response) => {\r\n          let temp = {};\r\n          for (const item of response.data) {\r\n            temp.name = item.goodsClassify;\r\n            temp.value = item.gradeY;\r\n            this.option.series[0].data.push(temp);\r\n            temp = {};\r\n          }\r\n          var chartDom = document.getElementById(\"main\");\r\n          var myChart = this.$echarts.init(chartDom);\r\n          this.option && myChart.setOption(this.option);\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n\r\n    // 实现轮询\r\n    this.timer = window.setInterval(() => {\r\n      setTimeout(this.getProjectList(), 0);\r\n    }, 1000);\r\n  },\r\n\r\n  mounted() {\r\n    var chartDom = document.getElementById(\"main\");\r\n    var myChart = this.$echarts.init(chartDom);\r\n    this.option && myChart.setOption(this.option);\r\n  },\r\n\r\n  methods: {\r\n    //查询\r\n    stop() {\r\n      clearInterval(this.timer);\r\n      this.timer = null;\r\n    },\r\n\r\n    // 请求是否有新消息\r\n    getProjectList() {\r\n      console.log(\"请求\" + this.num++ + \"次\");\r\n      this.$axios\r\n          .get(\"/api/interest/backstage/15518745323\")\r\n          .then((response) => {\r\n            console.log(response.data);\r\n            this.option.series[0].data = [];\r\n            let temp = {};\r\n            for (const item of response.data) {\r\n\r\n              for (const goodsClassifyItem of this.goodsClassify) {\r\n                if(goodsClassifyItem.id==item.goodsClassify){\r\n                  temp.name=goodsClassifyItem.name\r\n                }\r\n              }\r\n\r\n              // temp.name = item.goodsClassify;\r\n              temp.value = item.gradeY;\r\n              console.log(\"temp\", temp)\r\n              this.option.series[0].data.push(temp);\r\n              temp = {};\r\n            }\r\n            console.log(\"option\", this.option)\r\n            var chartDom = document.getElementById(\"main\");\r\n            var myChart = this.$echarts.init(chartDom);\r\n            this.option && myChart.setOption(this.option);\r\n          })\r\n          .catch((error) => {\r\n            console.log(error)\r\n          });\r\n\r\n      //TODO: if (this.num == 180) {\r\n\r\n      if (this.num == 2) {\r\n        this.stop();\r\n      }\r\n    },\r\n\r\n    // change() {\r\n    //    // 修改数据\r\n    //    this.option.series[0].data[0].value += 10;\r\n    //    //  页面更新\r\n    //    var chartDom = document.getElementById(\"main\");\r\n    //    var myChart = this.$echarts.init(chartDom);\r\n    //    this.option && myChart.setOption(this.option);\r\n    // },\r\n  },\r\n\r\n  destroyed() {\r\n    //离开页面是销毁\r\n    clearInterval(this.timer);\r\n    this.timer = null;\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 卡片 */\r\n.time {\r\n  font-size: 13px;\r\n  color: #999;\r\n}\r\n\r\n.bottom {\r\n  margin-top: 13px;\r\n  line-height: 12px;\r\n}\r\n\r\n.button {\r\n  padding: 0;\r\n  float: right;\r\n}\r\n\r\n.image {\r\n  width: 100%;\r\n  display: block;\r\n}\r\n\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n\r\n.clearfix:after {\r\n  clear: both;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}